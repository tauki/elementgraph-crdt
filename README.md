# Conflict-Free Replicated Data Types (CRDTs)

The element graph is composed of graph.Graph that stores the graph, and 2 TwoPSet type sets that keep track of the changes in nodes and edges.

The code includes an implementation of a graph type object `graph.T` which can be found at the `graph` directory. The graph.T is composed of Nodes and Edges, and it is a directional graph. The Nodes keep and EdgeSet internally to keep track of connected Nodes.

Example Uses for the element graph can be found at `elementgraph_exaple_test.go` file.

The ElementGraph does not implement a garbage collector, which can be a future improvement. Additionally, the graph is recalculated on every `merge` operation which can be improved to make the implementation better.

## Prerequisites:
- go:1.17

## Run Tests:

To run the tests simply type the following command:

```bash
go test ./... -count=1 -v
```

To run with coverage report, run the following command:
```bash
go test -coverprofile=coverage.out ./... -count=1
```

To get an extended report of the coverage using the `coverage.out` file, run the following command after running the above command or generating the `coverage.out` file:
```bash
go tool cover -func=coverage.out
```

The following command can be used to open the coverage report on a web browser to view which portion of the codes are covered (after generating the `coverage.out` file):
```bash
go tool cover -html=coverage.out
```

## Reports:

Test Report:
``` 
ok      github.com/tauki/crdt   0.003s  coverage: 100.0% of statements
ok      github.com/tauki/crdt/graph     0.003s  coverage: 100.0% of statements
ok      github.com/tauki/crdt/twoPSet   0.003s  coverage: 43.6% of statements

```

The included unit tests cover 100% of the code other than the autogenerated mock for twoPSet.

Coverage Report:
```
github.com/tauki/crdt/elementgraph.go:14:       NewElementGraph 100.0%
github.com/tauki/crdt/elementgraph.go:22:       AddNode         100.0%
github.com/tauki/crdt/elementgraph.go:28:       AddEdge         100.0%
github.com/tauki/crdt/elementgraph.go:34:       RemoveNode      100.0%
github.com/tauki/crdt/elementgraph.go:45:       RemoveEdge      100.0%
github.com/tauki/crdt/elementgraph.go:53:       Merge           100.0%
github.com/tauki/crdt/elementgraph.go:59:       RegenerateGraph 100.0%
github.com/tauki/crdt/graph/OP.go:5:            AddNode         100.0%
github.com/tauki/crdt/graph/OP.go:14:           RemoveNode      100.0%
github.com/tauki/crdt/graph/OP.go:31:           NodeExists      100.0%
github.com/tauki/crdt/graph/OP.go:36:           GetNode         100.0%
github.com/tauki/crdt/graph/OP.go:41:           AddEdge         100.0%
github.com/tauki/crdt/graph/OP.go:51:           RemoveEdge      100.0%
github.com/tauki/crdt/graph/OP.go:62:           EdgeExists      100.0%
github.com/tauki/crdt/graph/graph.go:27:        GetEdges        100.0%
github.com/tauki/crdt/graph/graph.go:31:        NewNode         100.0%
github.com/tauki/crdt/graph/graph.go:45:        Equal           100.0%
github.com/tauki/crdt/graph/graph.go:49:        NewEdge         100.0%
github.com/tauki/crdt/graph/graph.go:61:        New             100.0%
github.com/tauki/crdt/graph/graph.go:69:        FindPath        100.0%
github.com/tauki/crdt/graph/graph.go:81:        findPath        100.0%
github.com/tauki/crdt/twoPSet/2pset.go:29:      New             100.0%
github.com/tauki/crdt/twoPSet/2pset.go:38:      GetAddSet       100.0%
github.com/tauki/crdt/twoPSet/2pset.go:42:      GetRemoveSet    100.0%
github.com/tauki/crdt/twoPSet/2pset.go:46:      Add             100.0%
github.com/tauki/crdt/twoPSet/2pset.go:53:      Remove          100.0%
github.com/tauki/crdt/twoPSet/2pset.go:65:      Merge           100.0%
github.com/tauki/crdt/twoPSet/2pset.go:70:      Merge           100.0%
github.com/tauki/crdt/twoPSet/2pset_mock.go:17: Add             0.0%
github.com/tauki/crdt/twoPSet/2pset_mock.go:22: GetAddSet       0.0%
github.com/tauki/crdt/twoPSet/2pset_mock.go:38: GetRemoveSet    0.0%
github.com/tauki/crdt/twoPSet/2pset_mock.go:54: Merge           0.0%
github.com/tauki/crdt/twoPSet/2pset_mock.go:59: Remove          0.0%
total:                                          (statements)    81.7%

```